var v=s=>{throw TypeError(s)};var x=(s,e,i)=>e.has(s)||v("Cannot "+i);var t=(s,e,i)=>(x(s,e,"read from private field"),i?i.call(s):e.get(s)),u=(s,e,i)=>e.has(s)?v("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(s):e.set(s,i),f=(s,e,i,a)=>(x(s,e,"write to private field"),a?a.call(s,i):e.set(s,i),i);import{a1 as I,x as w,g as l,ad as J,u as N,ae as O}from"./EFB-SWyS.js";var o,r,c,g,n,d;class k{constructor(e,i,a){u(this,o);u(this,r,I(0));u(this,c,0);u(this,g);u(this,n);u(this,d,e=>{e.storageArea===t(this,n)&&e.key===t(this,o)&&w(t(this,r),l(t(this,r))+1)});f(this,o,e),f(this,g,i),f(this,n,a||(typeof localStorage<"u"?localStorage:void 0)),t(this,n)&&t(this,n).getItem(e)===null&&i!==void 0&&t(this,n).setItem(e,JSON.stringify(i))}get current(){l(t(this,r));const e=t(this,n)?JSON.parse(t(this,n).getItem(t(this,o))):t(this,g),i=new WeakMap,a=h=>{if(typeof h!="object"||h===null)return h;let p=i.get(h);return p||(p=new Proxy(h,{get:(S,m)=>(l(t(this,r)),a(Reflect.get(S,m))),set:(S,m,b)=>(w(t(this,r),l(t(this,r))+1),Reflect.set(S,m,b),t(this,n)&&t(this,n).setItem(t(this,o),JSON.stringify(e)),!0)}),i.set(h,p)),p};return J()&&N(()=>(t(this,c)===0&&typeof window<"u"&&window.addEventListener("storage",t(this,d)),f(this,c,t(this,c)+1),()=>{O().then(()=>{f(this,c,t(this,c)-1),t(this,c)===0&&typeof window<"u"&&window.removeEventListener("storage",t(this,d))})})),a(e)}set current(e){t(this,n)&&t(this,n).setItem(t(this,o),JSON.stringify(e)),w(t(this,r),l(t(this,r))+1)}}o=new WeakMap,r=new WeakMap,c=new WeakMap,g=new WeakMap,n=new WeakMap,d=new WeakMap;class y extends k{constructor(e,i){super(e,i,typeof localStorage<"u"?localStorage:void 0)}}class E extends k{constructor(e,i){super(e,i,typeof sessionStorage<"u"?sessionStorage:void 0)}}const R=new E("navigation",{isSidebarLocked:null,isLogsExpanded:!1}),U=new y("settings",{selectedLanguage:null,currentTheme:"system"}),W=new y("user",{user:null,token:null}),_=new y("models",{models:[],lastFetch:null});function j(){const s=L("api-url");return s||""}function B(){const s=L("base-path");return s||""}function L(s){const i=("; "+document.cookie).split("; "+s+"=");if(i.length==2)return i.pop().split(";").shift()}export{j as a,B as g,_ as m,R as n,U as s,W as u};
